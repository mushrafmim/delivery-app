{{#section 'head'}}
<title>Orders | Delivery App</title>
{{/section}}

<body>
    <div class="container pt-3">
        <div class="d-flex align-items-center justify-content-end py-3">
            <a href="/orders">
                <button type="button" class="btn btn-danger">CANCEL</button>
            </a>
        </div>
        <form action="/orders/add" method="post">
            <h1 class="text-center">PLACE ORDER</h1>
            <div class="mb-3">
                <label for="textInputShopName" class="form-label">TITLE</label>
                <input type="text" name="title" class="form-control" id="textInputShopName">
            </div>
            <div class="mb-3">
                <label for="exampleFormControlTextarea1" class="form-label">DESCRIPTION</label>
                <textarea rows="5" cols="50" class="form-control" name="description" id="exampleFormControlTextarea1"
                    rows="3"></textarea>
            </div>
            <input class="d-none" type="url" name="location" id="location"
                value="https://www.google.com/maps/search/?api=1&query=47.5951518%2C-122.3316393">
            <div class="mb-3">
                <label for="us2" class="form-label">LOCATION</label>
                <div id="us2" style="width: 500px; height: 400px;"></div>
            </div>
            <button class="btn btn-primary" type="submit">PLACE</button>
        </form>
    </div>
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script type="text/javascript" src="https://maps.google.com/maps/api/js?sensor=false&libraries=places"></script>
    <script type="text/javascript"
        src="https://rawgit.com/Logicify/jquery-locationpicker-plugin/master/dist/locationpicker.jquery.js"></script>
    <script>

        $(function () {
            $('#us2').locationpicker({
                location: { latitude: 6.772305558762623, longitude: 79.88528322666534 },
                radius: 0,
                inputBinding: {
                    latitudeInput: $('#lat'),
                    longitudeInput: $('#lng'),
                    locationNameInput: $('#location')
                },
                enableAutocomplete: true,
                onchanged: function (currentLocation, radius, isMarkerDropped) {

                    const locationURL = document.getElementById('location')

                    locationURL.value =
                        `https://www.google.com/maps/search/?api=1&query=${currentLocation.latitude}%2C${currentLocation.longitude}`
                }
            });
        });

    </script>
</body>